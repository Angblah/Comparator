<!DOCTYPE html>
<html lang="en">

<!-- Include the head tags -->
{% include "partials/header.html" %}


<link href="../static/css/template.css" rel="stylesheet">

<body>
<div id="all">
    <!-- Template Link -->
    <div id="template"></div>

    <div class="row">
        <div class="col-sm-10" id="attributes">
            <div class="row">
                <div class="col-sm-6"><h1>EDIT ATTRIBUTES</h1></div>
            </div>
            <hr>

            {% for attr in template %}
            <div class="col-sm-6" id="attribute" data-id={{attr['id']}}>
                <input style="padding-left: 10%" type="text" name="attributeName" value={{attr['name']}}>
                <a class="fa fa-times" aria-hidden="true" style="text-align: right; color: red; padding-left: 10px">delete</a>
                <hr>
            </div>
            {% endfor %}

            <div class="col-sm-6" id="add-attribute">
                <i class="fa fa-plus-circle" aria-hidden="true"></i>
                <b>ADD ATTRIBUTE</b>
            </div>

        </div>

        <div class="col-sm-4" id="nav-side">
            <div id="template-name">
                <i class="fa fa-trash" aria-hidden="true" style="padding-left: 90%"></i>
                <br>
                <input type="text" id="templateName" data-id={{template_id}} value={{templateName['name']}}>
            </div>
        </div>

    </div>
</div>
</body>

<!-- Include the nav bar for a user who isn't logged in -->
{% include "partials/userNavBar.html" %}

<!-- Include the footer for things like copyright info and JS scripts -->
{% include "partials/footer.html" %}
</html>

<script>
    $(".fa.fa-times").click(function() {
        var parent = $(this).parent();
        var id = parent.data("id");
        $.ajax({
            url: "/deleteSheetAttr",
            type: "POST",
            data: id,
            contentType: false,
            cache: false,
            processData: false,
            success: function(data) {
                parent.remove();
            }
        });
    });

    $("input[name='attributeName']").focusout(function() {
        var id = $(this).parent().data("id");
        var name = $(this).val();
        $.post("/setAttributeName", {name: name, id: id});
    });

    $("#templateName").focusout(function() {
        var id = $(this).data("id");
        var name = $(this).val();
        $.post("/setSheetName", {name: name, id: id});
    });





</script>