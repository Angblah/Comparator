<!DOCTYPE html>
<html lang="en">

<!-- Include the head tags -->
{% include "partials/header.html" %}
<!-- Include the nav bar for a user who isn't logged in -->
{% include "partials/userNavBar.html" %}

<link href="../static/css/dashboard.css" rel="stylesheet">

<body>

    <div id="all">

        <div class="nav-side">
            <div>
                <button type="submit" onclick="location.href='#recent-comps'">
                    <i class="fa fa-clock-o" aria-hidden="true"></i>
                    RECENT COMPARISONS
                </button>
            </div>
            <hr>
            <div class="nav-side-cont">
                <button type="submit" onclick="location.href='#my-comps'">
                    <i class="fa fa-compress" aria-hidden="true"></i>
                    MY COMPARISONS
                </button>
            </div>
            <hr>
            <div class="nav-side-cont">
                <button type="submit" onclick="location.href='#my-temps'">
                    <i class="fa fa-list-alt" aria-hidden="true"></i>
                    TEMPLATES
                </button>
            </div>
            <hr>
            <div>
                <button id="new-comp" type="submit" data-toggle="modal" data-target="#selectTemplateModal">
                    <i class="fa fa-plus-circle" aria-hidden="true"></i>
                    NEW COMPARISON
                </button>
            </div>
        </div>

        <div id="dashboard-content" style="padding-left: 37.5%">
            <hr style="clear: left;">
            <form id="dashSearch">
                <input class="search" type="search" name="search" placeholder="Search Comparisons and Templates">
                <button class="btn btn-template-main" type="submit">Submit</button>
                <input class="invisible" type="submit">
            </form>
            <div id="recent-comps">
                <h1>Recent Comparisons</h1>

                {% for row in recent_comp %}
                    <button type="button" id="{{'recentComp' ~ row['id']}}" class="tile" onclick="location.href='{{row['id'] | share_comparison(current_user.id)}}'">
                        {{row['name']}}
                    </button>
                {% endfor %}
            </div>
            <hr style="clear: left;">
            <div id="my-comps" style="clear: left;">
                <h1>My Comparisons</h1>
                {% for row in all_comp %}
                    <button type="button" id="{{'comp' ~ row['id']}}" class="tile" onclick="location.href='{{row['id'] | share_comparison(current_user.id)}}'">
                        {{row['name']}}
                    </button>
                {% endfor %}
            </div>
            <hr style="clear: left;">
            <div id="my-temps" style="clear: left;">
                <h1>My Templates</h1>
                {% for row in all_temp %}
                    <button type="button" id="{{'temp' ~ row['id']}}" class="tile" onclick="location.href='{{row['id'] | share_template(current_user.id)}}'">
                        {{row['name']}}
                    </button>
                {% endfor %}
            </div>
        </div>

        <!-- Include the select template modal -->
        {% include "partials/selectTemplateModal.html" %}

        <!-- <div class="home-carousel" style="height: 20em">

            <div class="dark-mask"></div>

            <div class="container">
                <div class="row">
                    <div class="container">
                        <br>
                        <br>
                        <div id="recent-comp" class="col-sm-6">
                            <div class="heading text-left">
                                <h3>Recent Comparisons</h3>
                            </div>
                            {% for row in recent_comp %}
                            <button type="button" onclick="location.href='{{row['id'] | share_comparison(current_user.id)}}'">
                                {{row['name']}}
                            </button>
                            {% endfor %}

                        </div>
                    </div>

                    <div class="col-sm-5">
                        <div class="heading text-left">
                            <h3>Or Make a New Comparison!</h3>
                        </div>
                        <div class="text-left">
                            <br>
                            <button type="submit" class="btn btn-template-main btn-lg" onclick="location.href='workspace'">
                                Start Comparing
                            </button>
                        </div>
                        <br>
                    </div>
    <<<<<<< HEAD


        <div class="container" align="center" style="padding-left: 4em">
                <ul class="tab" style="padding-left: 2em">
                  <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'comparisons')" id="defaultOpen">My Comparisons</a></li>
                  <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'templates')">My Templates</a></li>
                </ul>

                <div class="col-sm-11" align="center" style="margin-top: 0">
                    <div id="comparisons" class="tabcontent">
                        <h3>Comparisons</h3>
                        {% for row in all_comp %}
                                <button type="button" onclick="location.href='{{row['id'] | share_comparison}}'">
                                    {{row['name']}}
                                </button>
                        {% endfor %}
                        </div>
                    </div>

                    <div id="templates" class="tabcontent">
                      <h3>Templates</h3>
                      <p>Your Templates Will Live Here</p>
                    </div>
    =======
                </div>
                <!-- </div> -->
                <!-- </div>
            </div> -->

                <!-- <div class="container" align="center" style="padding-left: 4em">
                    <ul class="tab" style="padding-left: 2em">
                        <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'comparisons')"
                               id="defaultOpen">My Comparisons</a></li>
                        <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'templates')">My
                            Templates</a></li>
                    </ul>

                    <div class="col-sm-11" align="center" style="margin-top: 0">
                        <div id="comparisons" class="tabcontent">
                            <h3>Comparisons</h3>
                            {% for row in all_comp %}
                            <button type="button" onclick="location.href='{{row['id'] | share_comparison(current_user.id)}}'">
                                {{row['name']}}
                            </button>
                            {% endfor %}
                        </div>

                        <div id="templates" class="tabcontent">
                            <h3>Templates</h3>
                            {% for row in all_temp %}
                            <button type="button" onclick="location.href='{{row['id'] | share_template(current_user.id)}}'">
                                {{row['name']}}
                            </button>
                            {% endfor %}
                        </div>
                    </div>

                </div>

                <script>
                function openTab(evt, tab) {
                    var i, tabcontent, tablinks;
                    tabcontent = document.getElementsByClassName("tabcontent");
                    for (i = 0; i < tabcontent.length; i++) {
                        tabcontent[i].style.display = "none";
                    }
                    tablinks = document.getElementsByClassName("tablinks");
                    for (i = 0; i < tablinks.length; i++) {
                        tablinks[i].className = tablinks[i].className.replace(" active", "");
                    }
                    document.getElementById(tab).style.display = "block";
                    evt.currentTarget.className += " active";
                }

                // Get the element with id="defaultOpen" and click on it
                document.getElementById("defaultOpen").click();



                </script> -->

<!-- Include the footer for things like copyright info and JS scripts -->
{% include "partials/footer.html" %}
<!--<script src="../static/scripts/js/dashboard.bundle.js"></script>-->
</body>
</html>

<script>
    $("#dashSearch").submit(function(e) {
        e.preventDefault();
        var input = $(this).find(':input[type=search]').val();
        filterDisplay($("#recent-comps"), input);
        filterDisplay($("#my-comps"), input);
        filterDisplay($("#my-temps"), input);
    });

    function filterDisplay(div, str) {
        var tiles = div.children(".tile");
        tiles.each(function(index, element) {
            var match = $(element).text().toUpperCase().includes(str.toUpperCase());
            if (match) {
                $(element).show();
            } else {
                $(element).hide();
            }
        });
    };


</script>
<!--TODO: premade templates vs user templates division on create new template-->
<!--TODO: columns for select template-->
<!--TODO: make searching blank string show all tiles-->